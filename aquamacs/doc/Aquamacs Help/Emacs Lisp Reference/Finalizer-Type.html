<html lang="en">
<head>
<title>Finalizer Type - GNU Emacs Lisp Reference Manual</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="GNU Emacs Lisp Reference Manual">
<meta name="generator" content="makeinfo 4.13">
<link title="Top" rel="start" href="index.html#Top">
<link rel="up" href="Programming-Types.html#Programming-Types" title="Programming Types">
<link rel="prev" href="Autoload-Type.html#Autoload-Type" title="Autoload Type">
<link href="http://www.gnu.org/software/texinfo/" rel="generator-home" title="Texinfo Homepage">
<!--
This is the `GNU Emacs Lisp Reference Manual'
corresponding to Emacs version 25.0.50.

Copyright (C) 1990--1996, 1998--2015 Free Software Foundation, Inc.

     Permission is granted to copy, distribute and/or modify this
     document under the terms of the GNU Free Documentation License,
     Version 1.3 or any later version published by the Free Software
     Foundation; with the Invariant Sections being ``GNU General Public
     License,'' with the Front-Cover Texts being ``A GNU Manual,'' and
     with the Back-Cover Texts as in (a) below.  A copy of the license
     is included in the section entitled ``GNU Free Documentation
     License.''

     (a) The FSF's Back-Cover Text is: ``You have the freedom to copy
     and modify this GNU manual.  Buying copies from the FSF supports
     it in developing GNU and promoting software freedom.''
   -->
<meta http-equiv="Content-Style-Type" content="text/css">

<link rel="stylesheet" href="aquamacs.css" type="text/css" /></head>
<body>
<div class="node">
<a name="Finalizer-Type"></a>
<p>
Previous:&nbsp;<a rel="previous" accesskey="p" href="Autoload-Type.html#Autoload-Type">Autoload Type</a>,
Up:&nbsp;<a rel="up" accesskey="u" href="Programming-Types.html#Programming-Types">Programming Types</a>
<hr>
</div>

<h4 class="subsection">2.3.18 Finalizer Type</h4>

<p>A <dfn>finalizer object</dfn> helps Lisp code clean up after objects that
are no longer needed.  A finalizer holds a Lisp function object. 
When a finalizer object becomes unreachable after a garbage collection
pass, Emacs calls the finalizer's associated function object. 
When deciding whether a finalizer is reachable, Emacs does not count
references from finalizer objects themselves, allowing you to use
finalizers without having to worry about accidentally capturing
references to finalized objects themselves.

   <p>Errors in finalizers are printed to <code>*Messages*</code>.  Emacs runs
a given finalizer object's associated function exactly once, even
if that function fails.

<div class="defun">
&mdash; Function: <b>make-finalizer</b><var> function<a name="index-make_002dfinalizer-112"></a></var><br>
<blockquote><p>Make a finalizer that will run <var>function</var>.  <var>function</var> will be
called after garbage collection when the returned finalizer object
becomes unreachable.  If the finalizer object is reachable only
through references from finalizer objects, it does not count as
reachable for the purpose of deciding whether to run <var>function</var>. 
<var>function</var> will be run once per finalizer object. 
</p></blockquote></div>

   </body></html>

